function PWACOMMERCE_SETTINGS(){var JSObject=this;this.type='pwacommerce_settings';this.form;this.DOMDoc;this.send_btn;this.init=function(){PWACJSInterface=window.parent.PWACJSInterface;this.send_btn=jQuery('#'+this.type+'_send_btn',this.DOMDoc).get(0);this.form=this.DOMDoc.getElementById(this.type+'_form');this.addButtonsActions();if(this.form==null){return}
this.initValidation()};this.initValidation=function(){jQuery.validator.addMethod('regex',function(value,element,regexp){var re=new RegExp(regexp,'i');return this.optional(element)||re.test(value)},'Your code is invalid');this.validator=jQuery('#'+this.form.id,this.DOMDoc).validate({rules:{pwacommerce_settings_analyticsid:{regex:'^ua-\\d{4,9}-\\d{1,4}$'}},errorPlacement:function(error,element){var split_name=element[0].id.split('_');var id=split_name.length>1?split_name[split_name.length-1]:split_name[0];var errorContainer=jQuery('#error_'+id+'_container',JSObject.DOMDoc);error.appendTo(errorContainer)},errorElement:'span'});jQuery('#pwacommerce_settings_service_worker_installed_check',JSObject.DOMDoc).change(function(){if(this.checked){jQuery('#'+JSObject.type+'service_worker_installed',JSObject.DOMDoc).val('1')}else{jQuery('#'+JSObject.type+'service_worker_installed',JSObject.DOMDoc).val('0')}});var $GoogleAnalyticsId=jQuery('#'+this.type+'_analyticsid',this.form);$GoogleAnalyticsId.data('holder',$GoogleAnalyticsId.attr('placeholder'));$GoogleAnalyticsId.focusin(function(){jQuery(this).attr('placeholder','')}).focusout(function(){jQuery(this).attr('placeholder',jQuery(this).data('holder'))})};this.addButtonsActions=function(){jQuery(this.send_btn).unbind('click');jQuery(this.send_btn).bind('click',function(){JSObject.disableButton(this);JSObject.validate()});JSObject.enableButton(this.send_btn)};this.enableButton=function(btn){jQuery(btn).css('cursor','pointer');jQuery(btn).animate({opacity:1},100)};this.disableButton=function(btn){jQuery(btn).unbind('click');jQuery(btn).animate({opacity:0.4},100);jQuery(btn).css('cursor','default')};this.validate=function(){jQuery(this.form).validate().form();var arr_errorsYCoord=[];for(var name in this.validator.invalid){var input=jQuery(this.form[name]);arr_errorsYCoord.push(input.offset().top)}
if(arr_errorsYCoord.length==0){JSObject.sendData()}else{JSObject.addButtonsActions()}};this.submitForm=function(){return PWACJSInterface.AjaxUpload.dosubmit(JSObject.form,{onStart:JSObject.startUploadingData,onComplete:JSObject.completeUploadingData})};this.sendData=function(){jQuery('#'+this.form.id,this.DOMDoc).unbind('submit');jQuery('#'+this.form.id,this.DOMDoc).bind('submit',function(){JSObject.submitForm()});jQuery('#'+this.form.id,this.DOMDoc).submit();JSObject.disableButton(JSObject.send_btn)};this.startUploadingData=function(){PWACJSInterface.Preloader.start();setTimeout(function(){var aElems=JSObject.form.elements;nElems=aElems.length;for(j=0;j<nElems;j++){aElems[j].disabled=!0}},300);return!0};this.completeUploadingData=function(responseJSON){jQuery('#'+JSObject.form.id,JSObject.DOMDoc).unbind('submit');jQuery('#'+JSObject.form.id,JSObject.DOMDoc).bind('submit',function(){return!1});PWACJSInterface.Preloader.remove(100);var parsedJSON=JSON.parse(responseJSON);var response=Boolean(Number(String(parsedJSON.status)));PWACJSInterface.Loader.display({message:parsedJSON.message});setTimeout(function(){var aElems=JSObject.form.elements;nElems=aElems.length;for(j=0;j<nElems;j++){aElems[j].disabled=!1}},300);JSObject.addButtonsActions()}}